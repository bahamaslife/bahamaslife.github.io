(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2345c935"],{"0ae0":function(e,t,i){"use strict";i("814d")},"195a":function(e,t,i){},"318d":function(e,t,i){},3262:function(e,t,i){"use strict";i("318d")},"5d22":function(e,t,i){"use strict";i("195a")},"65a5":function(e,t,i){},"74fa":function(e,t,i){},"79f9":function(e,t,i){"use strict";i("74fa")},"814d":function(e,t,i){},"84e9":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"gridContainer",staticClass:"block-grid",class:{"block-grid__add-element-active":e.eventInfo&&e.eventInfo.addElementActive,"has-zero-m-vertical-padding":e.isMobileMode},style:e.computedStyles,attrs:{"data-qa":"builder-section-grid"},on:{mousedown:function(t){if(t.target!==t.currentTarget)return null;!e.eventInfo&&e.setElementEditMode(!1)},dragenter:function(t){return t.preventDefault(),e.onDragEnter(t)},dragover:function(t){return t.preventDefault(),e.onDragEnter(t)},dragleave:function(t){return t.preventDefault(),e.onDragLeave(t)},drop:function(t){return t.preventDefault(),e.onDrop(t)},contextmenu:function(t){return e.openGridBlockContextMenu(t,e.blockId)}}},[i("Transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showLayoutHelpers,expression:"showLayoutHelpers"}],staticClass:"block-grid__center-line"})]),e.isMobileMode?i("HeightController",{attrs:{value:e.topPadding,"is-resizable":e.isBlockHovered},on:{"start-resizing":e.onHeightControllerStart,"stop-resizing":function(t){e.topPadding=t,e.onHeightControllerStop()}}}):e._e(),e.isMobileMode?i("Draggable",{attrs:{animation:"150","ghost-class":"dragged-element",handle:".sortable","delay-on-touch-only":!0,"prevent-on-filter":!1,filter:".height-controller, .gridResizer__outline, .right, .left","fallback-axis":"y","force-fallback":!0,delay:200,"fallback-tolerance":1},on:{start:e.handleDragStart,sort:e.handleDragSort,end:e.handleDragEnd}},e._l(e.blockElements,(function(t){return i("div",{key:t+"-wrapper",staticClass:"sortable block-grid__item-wrapper",on:{mousedown:function(t){return t.target!==t.currentTarget?null:e.selectCurrentBlock(t)}}},[i("div",{staticClass:"block-grid__item",class:{"is-selected":e.currentElementId===t},style:e.alignmentStyles(t),on:{mousedown:function(i){return e.startMovingGridElement(i,t)},mouseenter:function(i){e.hoveredElementId=t},mouseleave:function(t){e.hoveredElementId=null}}},[i("BlockGridItem",{key:t+"-element",ref:"item-"+t,refInFor:!0,staticClass:"block-grid__item--inner",style:{"--element-z-index":e.data.zindexes.indexOf(t)+1},attrs:{id:t,data:e.siteElements[t],"use-m-margin":!e.isBlockHovered,"block-data":e.data},on:{"start-resizing":e.onHeightControllerStart,"stop-resizing":e.onHeightControllerStop}}),i("OverlayPill",{staticClass:"block-grid__item-pill",attrs:{text:e.$options.elementTitles[e.siteElements[t].type]}})],1),e.isMobileMode&&e.isBlockHovered&&t!==e.blockElements[e.blockElements.length-1]?i("HeightController",{key:t+"-margin",staticClass:"height-controller",attrs:{"is-resizable":e.isBlockHovered,value:e.getElementBottomMargin(t)},on:{"start-resizing":e.onHeightControllerStart,"stop-resizing":function(i){e.updateElementBottomMargin(t,i),e.onHeightControllerStop()}}}):e._e()],1)})),0):e._l(e.blockElements,(function(t){return i("BlockGridItem",{key:t+"-element-desktop",ref:"item-"+t,refInFor:!0,staticClass:"block-grid__item",style:{"--element-z-index":e.data.zindexes.indexOf(t)+1},attrs:{id:t,data:e.siteElements[t],"use-m-margin":!e.isBlockHovered,"block-data":e.data},on:{mousedown:function(i){return e.startMovingGridElement(i,t)},mouseenter:function(i){e.hoveredElementId=t},mouseleave:function(t){e.hoveredElementId=null},"update-height":function(t){return e.changeElementHeight(t)},"set-height":function(t){return e.changeElementHeight(t,!0)},contextmenu:function(i){return i.stopPropagation(),e.openElementContextMenu(i,t)}}})})),e.showEmptyBlock?i("EmptyBlockWarning"):e._e(),i("Transition",{attrs:{name:"fade"}},[i("BlockGridPattern",{directives:[{name:"show",rawName:"v-show",value:e.showLayoutHelpers,expression:"showLayoutHelpers"}],attrs:{id:e.blockId,"column-width":e.columnWidth,data:e.data}})],1),i("BlockGridElementInfoOverlay",{attrs:{info:e.hoveredElementInfo}}),i("BlockGridResizer",{attrs:{position:e.gridResizerPosition,"resize-visible":!e.eventInfo},on:{"trigger-resize":e.startResizingGridElement}}),e.isMobileMode?i("HeightController",{attrs:{value:e.bottomPadding,"is-resizable":e.isBlockHovered},on:{"stop-resizing":function(t){e.bottomPadding=t,e.onHeightControllerStop()},"start-resizing":e.onHeightControllerStart}}):e._e(),i("Portal",{attrs:{to:"root"}},[i("ContextMenuGridBlock",{attrs:{"is-rendering-allowed":e.blockId===e.rightClickedGridBlockId,"is-pasting-allowed":!e.copiedElementData},on:{"paste-element":e.pasteElement}})],1)],2)},s=[],o=i("5530"),r=i("82dc"),l=i("4364"),a=i.n(l),d=i("2f62"),c=i("2d27"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._g({directives:[{name:"qa",rawName:"v-qa",value:e.data.type+":"+e.id,expression:"`${data.type}:${id}`"}],ref:"elementBox",staticClass:"block-grid-item",class:{"is-current":e.currentElementId===e.id,"is-editing":e.isElementEditMode,"use-m-margin":e.useMMargin,"is-cut":e.isThisElementCut},style:e.computedStyles,on:{click:function(e){e.preventDefault()},mousedown:function(t){return e.handleElementMousedown(e.id)},dblclick:function(t){return e.handleElementDblclick()}}},e.$listeners),[i(e.data.type,{ref:"element",tag:"Component",attrs:{id:e.id,data:e.data,"element-width":e.elementWidth,"element-height":e.elementHeight},on:{"hook:mounted":function(t){e.listenForSizeChanges(),e.$recompute("width"),e.$recompute("parentWidth")},"hook:beforeDestroy":e.listenForSizeChangesStop}}),e.useMobileResizer?i("BlockGridMobileResizer",{attrs:{"element-alignment":e.elementAlignment,value:e.width,"max-width":e.parentWidth},on:{"start-resizing":e.onStartResizing,resize:e.onResize,"stop-resizing":e.onStopResizing}}):e._e()],1)},m=[],u=(i("ddb0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gridResizer",style:e.computedStyles},[i("div",{staticClass:"gridResizer__outline"}),e._l(e.triggerPositions,(function(t){return i("div",{key:t,staticClass:"gridResizer__handle",class:t,on:{mousedown:function(i){return e.startResizing(i,t)}}},[i("div",{class:t+"__dot"})])}))],2)}),g=[],p={props:{value:{type:Number,required:!0},elementAlignment:{type:String,default:"right"},maxWidth:{type:Number,default:200}},data(){return{eventInfo:{}}},computed:{triggerPositions(){return"none"===this.elementAlignment?[]:"flex-start"===this.elementAlignment?["right"]:"flex-end"===this.elementAlignment?["left"]:["left","right"]},computedStyles(){return{"--width-controller-width":this.computedWidth?"".concat(this.computedWidth,"px"):this.value}},computedWidth(){if(!this.eventInfo)return this.value;const e=30;return"left"===this.eventInfo.triggerPosition?Math.min(Math.max(this.value-(this.eventInfo.xCurrent-this.eventInfo.xStart),e),this.maxWidth):Math.min(Math.max(this.value+this.eventInfo.xCurrent-this.eventInfo.xStart,e),this.maxWidth)}},methods:{startResizing(e,t){this.eventInfo={xStart:e.clientX,triggerPosition:t},window.addEventListener("mousemove",this.resizeElement),window.addEventListener("mouseup",this.stopResizing),this.$emit("start-resizing")},resizeElement(e){this.eventInfo=Object(o["a"])(Object(o["a"])({},this.eventInfo),{},{xCurrent:e.clientX}),this.$emit("resize",this.computedWidth)},stopResizing(){window.removeEventListener("mouseup",this.stopResizing),window.removeEventListener("mousemove",this.resizeElement),this.$emit("stop-resizing",this.computedWidth),this.eventInfo=null}}},v=p,b=(i("b87e8"),i("2877")),f=Object(b["a"])(v,u,g,!1,null,"99f9410a",null),y=f.exports,I=i("cfd4"),E=i("1666"),k=i("7c9b"),x=i("4e1c");const w=["GridTextBox","GridSocialIcons","GridForm"],C=["GridInstagramFeed","GridGallery"],z=[...C,...w],B=["GridButton","GridStripeButton"];var O={name:"BlockGridItem",components:{GridButton:()=>i.e("chunk-2d0cc833").then(i.bind(null,"4df3")),GridStripeButton:()=>i.e("chunk-62c7007c").then(i.bind(null,"8445")),GridMap:()=>i.e("chunk-4b973294").then(i.bind(null,"c579")),GridVideo:()=>i.e("chunk-2d216d4b").then(i.bind(null,"c3af")),GridImage:()=>i.e("chunk-2d0d83d9").then(i.bind(null,"79de")),GridTextBox:()=>i.e("chunk-2d20ef79").then(i.bind(null,"b22e")),GridForm:()=>i.e("chunk-2d0bae79").then(i.bind(null,"38ca")),GridInstagramFeed:()=>i.e("chunk-2d0c5026").then(i.bind(null,"3cee")),GridSocialIcons:()=>i.e("chunk-2d225257").then(i.bind(null,"e2c7")),GridGallery:()=>i.e("chunk-6e71531e").then(i.bind(null,"8043")),GridEmbed:()=>i.e("chunk-c44a0ffe").then(i.bind(null,"12db")),BlockGridMobileResizer:y},props:{id:{type:String,required:!0},data:{type:Object,required:!0},useMMargin:{type:Boolean,default:!0},blockData:{type:Object,required:!0}},setup(){const{copiedElementId:e,isElementCut:t}=Object(I["a"])();return{copiedElementId:e,isElementCut:t}},data(){return{resizeObserver:null,currentElementBeforeEdit:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(d["f"])(["currentElementId"])),Object(d["f"])("gui",["isElementEditMode"])),Object(d["d"])(["currentElement"])),Object(d["d"])("gui",["isMobileMode"])),{},{isThisElementCut(){return this.isElementCut&&this.copiedElementId===this.id},showMobileResizer:({currentElement:e})=>!B.includes(e.type),settings:({data:e})=>e.settings,styles:({settings:e})=>e.styles,innerBackgroundValue({data:e}){const{innerBackground:t}=e;if(!t)return{};const i=t[t.current];if("image"===t.current){const e={"--gridItemInnerBackground":"url(".concat(i,")")};return"overlay-opacity"in t&&(e["--gridItemInnerBackgroundOverlayOpacity"]=t["overlay-opacity"]),e}return{"--gridItemInnerBackground":i}},parentWidth(){return this.$refs.elementBox.parentNode.parentNode.clientWidth},width(){var e,t;return null!==(e=null===(t=this.$refs.elementBox)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:0},useMobileResizer(){return this.currentElementId===this.id&&this.isMobileMode},elementAlignment(){return this.showMobileResizer?this.styles["m-align-self"]||"flex-start":"none"},elementWidth(){var e;return null===(e=Object(x["a"])(this.blockData,this.styles.position))||void 0===e?void 0:e.width},elementHeight(){var e;return null===(e=Object(x["a"])(this.blockData,this.styles.position))||void 0===e?void 0:e.height},computedStyles(){return Object(o["a"])(Object(o["a"])({},Object(E["a"])(this.styles)),this.innerBackgroundValue)}}),watch:{"styles.gridItemInnerPadding":function(){this.$emit("update-height",this.id)}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(d["c"])("gui",["setElementEditMode"])),Object(d["e"])(["setElementData","pushElementDataToHistory","setCurrentElement"])),{},{listenForSizeChanges(){if(!z.includes(this.data.type))return;const e=this.$refs.element.$el;this.resizeObserver=new ResizeObserver(()=>{if(this.currentElementId!==this.id)return;const t=this.$refs.elementBox.clientHeight<e.scrollHeight;t?this.$emit("update-height",this.id):C.includes(this.data.type)&&this.$emit("set-height",this.id)}),this.resizeObserver.observe(e)},listenForSizeChangesStop(){z.includes(this.data.type)&&(this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null)},handleElementMousedown(e){e!==this.currentElementId&&(this.setElementEditMode(!1),this.setCurrentElement({elementId:e,elementBoxRef:this.$refs.elementBox,elementRef:this.$refs.element}),this.$emit("element-selected"))},handleElementDblclick(){this.isElementEditMode||this.setElementEditMode(!0)},onStartResizing(){this.$emit("start-resizing"),this.currentElementBeforeEdit=Object(k["a"])(this.data)},onResize(e){this.setElementData({skipHistory:!0,elementId:this.id,data:{settings:{styles:{"m-width":"".concat(e,"px")}}}})},onStopResizing(e){const t=e/this.parentWidth*100;this.setElementData({skipHistory:!0,elementId:this.id,data:{settings:{styles:{"m-width":"".concat(t,"%")}}}}),this.pushElementDataToHistory({elementId:this.id,oldData:this.currentElementBeforeEdit}),this.currentElementBeforeEdit=null,this.$emit("stop-resizing"),this.$recompute("width")}})},G=O,M=(i("0ae0"),Object(b["a"])(G,h,m,!1,null,"6ca309f9",null)),_=M.exports,P=i("ec78"),$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Transition",{attrs:{name:"fade"}},[i("div",{staticClass:"grid-tiles"},[i("svg",{staticClass:"grid-tiles__svg",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[i("defs",[i("pattern",{staticClass:"grid-tiles__pattern-outer",attrs:{id:"grid-pattern-"+e.id,height:e.gridPatternSize.outerHeight,width:e.gridPatternSize.outerWidth,patternUnits:"userSpaceOnUse"}},[e.gapsEnabled?i("rect",{staticClass:"grid-tiles__pattern-inner",attrs:{height:e.gridPatternSize.innerHeight,width:e.gridPatternSize.innerWidth,rx:"3",x:"0.5",y:"0.5","stroke-width":"1"}}):i("rect",{attrs:{height:e.gridPatternSize.innerHeight,width:e.gridPatternSize.innerWidth,rx:"0","stroke-width":"1","stroke-linecap":"square",x:"0.5",y:"0.5",fill:"none",stroke:"var(--grey-800-02)"}})])]),i("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid-pattern-"+e.id+")"}})])])])},j=[],R={name:"BlockGridPattern",props:{columnWidth:{type:Number,required:!0},data:{type:Object,required:!0},id:{type:String,required:!0}},computed:{styles({data:e}){var t,i;return null!==(t=null===e||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.styles)&&void 0!==t?t:{}},gapsEnabled({styles:e}){return!("0px"===e["column-gap"]&&"0px"===e["row-gap"])},gridPatternSize({columnWidth:e,styles:t}){return{innerWidth:"".concat(e,"px"),outerWidth:"".concat(Number.parseInt(t["column-gap"],10)+e,"px"),innerHeight:t["row-size"],outerHeight:"".concat(Number.parseInt(t["row-size"],10)+Number.parseInt(t["row-gap"],10),"px")}}}},S=R,D=(i("9306"),Object(b["a"])(S,$,j,!1,null,"da7d099a",null)),H=D.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.position?i("div",{staticClass:"gridResizer",style:e.computedStyles},[i("div",{staticClass:"gridResizer__outline"}),e.resizeVisible?e._l(e.$options.positions,(function(t){return i("div",{key:t,staticClass:"gridResizer__handle",class:t,on:{mousedown:function(i){return e.$emit("trigger-resize",i,t)}}},[i("div",{class:t+"__dot"})])})):e._e()],2):e._e()},W=[];const A=["top","right","bottom","left","topLeft","topRight","bottomLeft","bottomRight"];var L={positions:A,props:{position:{type:[Object,String],default:null},resizeVisible:{type:Boolean,default:!1}},computed:{computedStyles(){const{position:e}=this;return"object"===typeof e?"--position: ".concat(e.y1,"/").concat(e.x1,"/").concat(e.y2,"/").concat(e.x2,";"):"--position: ".concat(e)}}},N=L,F=(i("79f9"),Object(b["a"])(N,T,W,!1,null,"4964563c",null)),q=F.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"empty-block__wrapper"},[i("div",{staticClass:"empty-block"},[i("p",{staticClass:"z-body-small z-body-small--strong"},[e._v(" "+e._s(e.$t("builder.emptyBlockWarning.textStrong"))+" ")]),i("p",{staticClass:"z-body-small"},[e._v(" "+e._s(e.$t("builder.emptyBlockWarning.text"))+" ")])])])},X=[],Y=(i("3262"),{}),J=Object(b["a"])(Y,V,X,!1,null,"79e954e3",null),U=J.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"height-controller",class:{"is-active":e.eventInfo,"height-controller--is-hovered":e.isResizable},style:e.computedStyles,on:{mousedown:e.startResizing}},[i("div",{staticClass:"height-controller__background"},[e.eventInfo&&e.eventInfo.yCurrent?[i("div",{staticClass:"height-controller__line-ending"}),i("div",{staticClass:"height-controller__middle-line"}),i("div",{staticClass:"height-controller__value z-body-small"},[e._v(" "+e._s(e.computedValue)+" px ")]),i("div",{staticClass:"height-controller__middle-line"}),i("div",{staticClass:"height-controller__line-ending"})]:e._e()],2)])},K=[],Q={props:{value:{type:Number,default:0},linearity:{type:Number,default:1.5},isResizable:{type:Boolean,default:!1}},data(){return{eventInfo:null}},computed:{computedValue(){var e;return Math.max(null!==(e=this.eventInfo)&&void 0!==e&&e.yCurrent?this.value+Math.floor((this.eventInfo.yCurrent-this.eventInfo.yStart)/this.linearity):this.value,0)},computedStyles(){return{"--height-controller-height":"".concat(this.computedValue,"px")}}},methods:{startResizing(e){this.isResizable&&(this.eventInfo={yStart:e.clientY},window.addEventListener("mousemove",this.resizeElement),window.addEventListener("mouseup",this.stopResizing),this.$emit("start-resizing"))},resizeElement(e){this.eventInfo=Object(o["a"])(Object(o["a"])({},this.eventInfo),{},{yCurrent:e.clientY})},stopResizing(){window.removeEventListener("mouseup",this.stopResizing),window.removeEventListener("mousemove",this.resizeElement),this.$emit("stop-resizing",this.computedValue),this.eventInfo=null}}},ee=Q,te=(i("5d22"),Object(b["a"])(ee,Z,K,!1,null,"0c60adaa",null)),ie=te.exports,ne=i("0b7b"),se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContextMenu",{attrs:{"is-rendering-allowed":!!e.rightClickedGridBlockId&&e.isRenderingAllowed},on:{"close-context-menu":function(t){e.rightClickedGridBlockId=null}}},[i("ContextMenuButton",{attrs:{title:e.$t("builder.contextMenu.gridBlock.paste"),disabled:e.isPastingAllowed},nativeOn:{click:function(t){e.pasteElement(),e.closeContextMenu()}}}),i("ZyroSeparator"),i("ContextMenuButton",{attrs:{title:e.$t("builder.contextMenu.gridBlock.copySection")},nativeOn:{click:function(t){e.copyBlock(),e.closeContextMenu()}}}),i("ContextMenuButton",{attrs:{title:e.$t("builder.contextMenu.gridBlock.pasteSection"),disabled:!e.doesCopiedBlockExist},nativeOn:{click:function(t){e.pasteBlock(),e.closeContextMenu()}}})],1)},oe=[],re=i("8ad7"),le=i("a6f4");const ae=Object(le["i"])(null),de=Object(le["i"])(null),ce=()=>({rightClickedGridBlockId:ae,copiedGridBlockId:de});var he=i("87b8"),me=i("64a0"),ue={components:{ContextMenu:he["a"],ContextMenuButton:me["a"]},props:{isRenderingAllowed:{type:Boolean,default:!0},isPastingAllowed:{type:Boolean,required:!0}},setup(){const{rightClickedGridBlockId:e,copiedGridBlockId:t}=ce(),{closeContextMenu:i}=Object(re["a"])();return{rightClickedGridBlockId:e,copiedGridBlockId:t,closeContextMenu:i}},computed:Object(o["a"])(Object(o["a"])({},Object(d["d"])(["siteElements","siteBlocks","getBlockDuplicateById"])),{},{doesCopiedBlockExist(){return!!this.siteBlocks[this.copiedGridBlockId]}}),methods:Object(o["a"])(Object(o["a"])({},Object(d["c"])(["addBlock"])),{},{pasteElement(){this.$emit("paste-element")},copyBlock(){this.copiedGridBlockId=this.rightClickedGridBlockId},pasteBlock(){const e=this.getBlockDuplicateById(this.copiedGridBlockId);this.addBlock({block:Object(o["a"])(Object(o["a"])({},e.newBlock),{},{slot:null}),previousBlockId:this.rightClickedGridBlockId,components:e.newComponents,addToPage:!0})}})},ge=ue,pe=Object(b["a"])(ge,se,oe,!1,null,null,null),ve=pe.exports,be=i("0af6"),fe=i("119c"),ye=i("002e"),Ie=i("9361");const Ee={GridTextBox:"text_element",GridImage:"image_element",GridGallery:"gallery_element",GridVideo:"video_element",GridSocialIcons:"social_icons_element",GridMap:"map_element",GridForm:"form_element",GridButton:"button_element",GridStripeButton:"stripe_button_element",GridInstagramFeed:"instagram_feed_element",GridEmbed:"embed_element"},ke={GridTextBox:fe["a"].t("common.text"),GridImage:fe["a"].t("common.image"),GridGallery:fe["a"].t("common.gallery"),GridVideo:fe["a"].t("common.video"),GridSocialIcons:fe["a"].t("common.socialIcons"),GridMap:fe["a"].t("common.map"),GridForm:fe["a"].t("common.form"),GridButton:fe["a"].t("common.button"),GridStripeButton:fe["a"].t("common.stripeCheckout"),GridInstagramFeed:fe["a"].t("common.instagramFeed"),GridEmbed:fe["a"].t("common.embedCode")};var xe={elementTitles:ke,components:{Draggable:a.a,BlockGridItem:_,BlockGridPattern:H,BlockGridElementInfoOverlay:P["default"],BlockGridResizer:q,HeightController:ie,EmptyBlockWarning:U,ContextMenuGridBlock:ve,OverlayPill:ne["a"]},props:{data:{type:Object,required:!0},blockId:{type:String,required:!0},activeEventInfo:{type:Object,default:()=>({})},isBlockHovered:{type:Boolean,default:!1}},setup(){const{openContextMenu:e,mouseEventRaw:t}=Object(re["a"])(),{rightClickedElementId:i,copiedElementId:n,isElementCut:s}=Object(I["a"])(),{rightClickedGridBlockId:o}=ce();return{openContextMenu:e,mouseEventRaw:t,rightClickedElementId:i,rightClickedGridBlockId:o,copiedElementId:n,isElementCut:s}},data(){return{eventInfo:null,hoveredElementId:null,resizeObserver:null,resizeObserverGrid:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(d["f"])(["website","currentElementId"])),Object(d["f"])("gui",["isMobileView","isMobileScreen"])),Object(d["f"])("user",["user"])),Object(d["d"])(["siteBlocks","siteElements","currentElement","isEditingTextBoxElement","elementBlockId"])),Object(d["d"])("gui",["isMobileMode"])),{},{copiedElementData(){return this.siteElements[this.copiedElementId]||null},settings:({data:e})=>e.settings,styles:({settings:e})=>e.styles,blockElements(){const e=this.data.components.filter(e=>!this.siteElements[e]);return e.length&&r["b"](new Error("Missing elements: ".concat(e.join(","))),{tags:{errorType:"Invalid data.json"}}),this.data.components.filter(e=>this.siteElements[e])},computedStyles(){return{"--current-grid-height":this.gridHeightInRows}},showEmptyBlock(){return 0===this.siteBlocks[this.blockId].components.length&&!this.data.background.current&&!(this.eventInfo&&this.eventInfo.addElementActive)},showLayoutHelpers(){return this.activeEventInfo&&(this.activeEventInfo.blockId===this.blockId||this.eventInfo)&&!this.isMobileScreen&&!this.isMobileView},topPadding:{set(e){const t=Object(Ie["a"])(this.styles["m-block-padding"]||"0");t.top="".concat(e,"px");const i=Object.values(t).join(" ");this.$emit("update-mobile-padding",i),this.setBlockData({blockId:this.blockId,data:{settings:{styles:{"m-block-padding":i}}},skipHistory:!1})},get(){return Number.parseInt(Object(Ie["a"])(this.styles["m-block-padding"]||"0").top,10)}},bottomPadding:{set(e){const t=Object(Ie["a"])(this.styles["m-block-padding"]||"0");t.bottom="".concat(e,"px");const i=Object.values(t).join(" ");this.$emit("update-mobile-padding",i),this.setBlockData({blockId:this.blockId,data:{settings:{styles:{"m-block-padding":i}}},skipHistory:!1})},get(){return Number.parseInt(Object(Ie["a"])(this.styles["m-block-padding"]||"0").bottom,10)}},columnWidth(){return this.$refs.gridContainer?Number.parseFloat(getComputedStyle(this.$refs.gridContainer)["grid-template-columns"].split(" ")[3],0):0},hoveredElementInfo(){var e;if(null!==(e=this.activeEventInfo)&&void 0!==e&&e.elementId){const e=this.gridAreaToArray(this.siteElements[this.activeEventInfo.elementId].settings.styles.position);return{y1:e[0],x1:e[1],y2:e[2],x2:e[3],color:this.activeEventInfo.outlineColor}}if(!this.hoveredElementId||this.eventInfo||!this.siteElements[this.hoveredElementId]||this.hoveredElementId===this.currentElementId||this.isMobileView||this.isMobileScreen)return null;const t=this.gridAreaToArray(this.siteElements[this.hoveredElementId].settings.styles.position);return{title:this.$options.elementTitles[this.siteElements[this.hoveredElementId].type]||"Item",y1:t[0],x1:t[1],y2:t[2],x2:t[3]}},gridResizerPosition(){if(this.isMobileMode)return null;if(this.eventInfo)return this.eventInfo.gridResizerPosition;if(this.blockElements.includes(this.currentElementId)){const e=this.$store.state.website.components[this.$store.state.currentElementId];return e.settings.styles.position}return null},gridHeightInRows(){return this.$refs.gridContainer?getComputedStyle(this.$refs.gridContainer)["grid-template-rows"].split(" ").length:0}}),watch:{showEmptyBlock(e,t){!t||e||this.data.background.current||this.setBlockData({blockId:this.blockId,data:{background:{color:"var(--colors-light)",current:"color"}}})}},mounted(){this.$recompute("columnWidth"),this.$recompute("gridHeightInRows"),this.resizeObserver=new ResizeObserver(()=>{this.$recompute("columnWidth")}),this.resizeObserver.observe(document.body),this.resizeObserverGrid=new ResizeObserver(()=>{this.$recompute("columnWidth"),this.$recompute("gridHeightInRows"),this.$emit("rows-changed",this.gridHeightInRows)}),this.resizeObserverGrid.observe(this.$refs.gridContainer)},beforeDestroy(){this.resizeObserver.disconnect(),this.resizeObserverGrid.disconnect()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(d["c"])("gui",["setElementEditMode"])),Object(d["c"])(["setCurrentElement","removeElement"])),Object(d["e"])(["addElement","setElementData","setBlockData","unsetCurrentElement"])),{},{handleDragStart(){this.$emit("lock-hovered-block",!0),this.unsetCurrentElement()},handleDragSort(e){const t=Object(k["a"])(this.siteBlocks[this.blockId].components),i=t[e.oldIndex];t.splice(e.oldIndex,1),t.splice(e.newIndex,0,i),this.setBlockData({blockId:this.blockId,data:{components:t}})},handleDragEnd(){this.$emit("lock-hovered-block",!1)},pasteElement(){if(this.copiedElementData){const e=Object(k["a"])(this.copiedElementData),t=this.gridAreaToArray(e.settings.styles.position),i=t[3]-t[1],n=t[2]-t[0],s=this.isMobileMode?{column:1,row:1}:this.getMousePositionOnGrid(this.mouseEventRaw),{column:o,row:r}=s,l=this.snapPositionToGrid({x1:o,x2:o+i,y1:r,y2:r+n});e.settings.styles.position="".concat(l.y1,"/").concat(l.x1,"/").concat(l.y2,"/").concat(l.x2);const a=Object(ye["a"])();this.addElement({blockId:this.blockId,elementId:a,element:e}),this.isElementCut&&(this.removeElement({elementId:this.copiedElementId,blockId:this.elementBlockId(this.copiedElementId)}),this.isElementCut=null,this.copiedElementId=null),this.onAfterElementAdd(a)}},async onAfterElementAdd(e,t){await this.$nextTick();const i=this.$refs["item-".concat(e)][0],n=i.$children[0];this.setCurrentElement({elementId:e,elementBoxRef:i.$el,elementRef:n}),this.$emit("set-edit-control-visibility",!0),this.eventInfo=null,t&&this.logAddElementEvent(t)},openElementContextMenu(e,t){this.isEditingTextBoxElement||(e.preventDefault(),this.openContextMenu(e),this.rightClickedElementId=t)},openGridBlockContextMenu(e,t){this.isCurrentlyEditingTextElement||(e.preventDefault(),this.openContextMenu(e),this.rightClickedGridBlockId=t)},validateDragDrop(e){const t=e.dataTransfer.getData("elementId");return t||e.preventDefault(),t},getElementBottomMargin(e){return this.siteElements[e].settings.styles["m-element-margin"]?Number.parseInt(Object(Ie["a"])(this.siteElements[e].settings.styles["m-element-margin"]).bottom,10):0},updateElementBottomMargin(e,t){this.setElementData({elementId:e,data:{settings:{styles:{"m-element-margin":"0 0 ".concat(t,"px 0")}}},skipHistory:!1})},onHeightControllerStart(){this.$emit("lock-hovered-block",!0),this.$emit("set-edit-control-visibility",!1)},onHeightControllerStop(){this.$emit("lock-hovered-block",!1),this.$emit("set-edit-control-visibility",!0)},pxToRows(e,t=!1){const i=Number.parseInt(this.styles["row-size"],10),n=Number.parseInt(this.styles["row-gap"],10),s=t?.5:0;return Math.round(e/(i+n)+s)},pxToColumns(e){return Math.round(e/(this.columnWidth+Number.parseInt(this.styles["column-gap"],10)))},gridAreaToArray(e){return e.split("/").map(Number)},changeElementHeight(e,t=!1){if(this.eventInfo||this.isMobileMode)return;const i=this.$refs["item-".concat(e)][0].$refs.element.$el,n=this.pxToRows(i.scrollHeight,!0),s=this.gridAreaToArray(this.siteElements[e].settings.styles.position),o=n-(s[2]-s[0]);o>0&&(s[2]+=o);const r=t?n+s[0]:s[2];this.siteElements[e].settings.styles.position="".concat(s[0],"/").concat(s[1],"/").concat(r,"/").concat(s[3])},shouldPreventGridLayoutChange(e){return this.isMobileMode||2===e.button},startResizingGridElement(e,t){if(this.shouldPreventGridLayoutChange(e))return;const i=this.$refs["item-".concat(this.currentElementId)][0].$el;this.eventInfo={x:e.clientX,y:e.clientY,id:this.currentElementId,element:i,gridResizerPosition:null,direction:t,originalHeight:i.clientHeight,originalWidth:i.clientWidth,originalPosition:this.gridAreaToArray(this.siteElements[this.currentElementId].settings.styles.position)},this.eventInfo.gridResizerPosition=this.calculateGridElementPosition(e),this.$emit("set-edit-control-visibility",!1),this.eventInfo.element.style.setProperty("--event-background-color","var(--grey-800-02)"),window.addEventListener("mousemove",this.resizeGridElement),window.addEventListener("mouseup",this.stopResizingGridElement)},resizeGridElement(e){const t={y1:this.eventInfo.originalPosition[0],x1:this.eventInfo.originalPosition[1],y2:this.eventInfo.originalPosition[2],x2:this.eventInfo.originalPosition[3]};let i=e.clientX-this.eventInfo.x,n=e.clientY-this.eventInfo.y;const s=this.eventInfo.direction.toLowerCase().includes("left")?1:-1;this.eventInfo.originalWidth-i*s<this.columnWidth&&(i=(this.eventInfo.originalWidth-this.columnWidth)*s);const o=this.eventInfo.direction.toLowerCase().includes("top")?1:-1,r=Number.parseInt(this.styles["row-size"],10);this.eventInfo.originalHeight-n*o<r&&(n=(this.eventInfo.originalHeight-r)*o);const l=Number.parseInt(this.styles["row-gap"],10),a=(t.y1-1)*(r+l);n*o<0&&(n=Math.max(-a,n));const d=this.pxToColumns(i),c=this.pxToRows(n);switch(this.eventInfo.direction){case"right":t.x2+=d,this.eventInfo.element.style.setProperty("--width-x","".concat(i,"px"));break;case"left":t.x1+=d,this.eventInfo.element.style.setProperty("--width-x","".concat(-i,"px")),this.eventInfo.element.style.setProperty("--moved-x","".concat(i,"px"));break;case"bottom":t.y2+=c,this.eventInfo.element.style.setProperty("--width-y","".concat(n,"px"));break;case"top":t.y1+=c,this.eventInfo.element.style.setProperty("--width-y","".concat(-n,"px")),this.eventInfo.element.style.setProperty("--moved-y","".concat(n,"px"));break;case"topLeft":t.y1+=c,t.x1+=d,this.eventInfo.element.style.setProperty("--width-y","".concat(-n,"px")),this.eventInfo.element.style.setProperty("--width-x","".concat(-i,"px")),this.eventInfo.element.style.setProperty("--moved-y","".concat(n,"px")),this.eventInfo.element.style.setProperty("--moved-x","".concat(i,"px"));break;case"topRight":t.y1+=c,t.x2+=d,this.eventInfo.element.style.setProperty("--width-y","".concat(-n,"px")),this.eventInfo.element.style.setProperty("--width-x","".concat(i,"px")),this.eventInfo.element.style.setProperty("--moved-y","".concat(n,"px"));break;case"bottomLeft":t.y2+=c,t.x1+=d,this.eventInfo.element.style.setProperty("--width-y","".concat(n,"px")),this.eventInfo.element.style.setProperty("--width-x","".concat(-i,"px")),this.eventInfo.element.style.setProperty("--moved-x","".concat(i,"px"));break;case"bottomRight":t.y2+=c,t.x2+=d,this.eventInfo.element.style.setProperty("--width-y","".concat(n,"px")),this.eventInfo.element.style.setProperty("--width-x","".concat(i,"px"));break;default:break}const h=Number.parseInt(this.styles["column-count"],10);t.x2=Math.max(Math.min(h+5,t.x2),2),t.x1=Math.min(Math.max(1,t.x1),t.x2-1),t.y1=Math.max(1,t.y1),this.eventInfo.gridResizerPosition=t},stopResizingGridElement(){window.removeEventListener("mouseup",this.stopResizingGridElement),window.removeEventListener("mousemove",this.resizeGridElement),this.eventInfo.element.style.setProperty("--width-x","0"),this.eventInfo.element.style.setProperty("--width-y","0"),this.eventInfo.element.style.setProperty("--moved-x","0"),this.eventInfo.element.style.setProperty("--moved-y","0"),this.eventInfo.element.style.setProperty("--event-background-color","");const e="".concat(this.eventInfo.gridResizerPosition.y1,"/").concat(this.eventInfo.gridResizerPosition.x1,"/").concat(this.eventInfo.gridResizerPosition.y2,"/").concat(this.eventInfo.gridResizerPosition.x2);this.setElementData({elementId:this.eventInfo.id,data:{settings:{styles:{position:e}}},skipHistory:!1}),this.changeElementHeight(this.eventInfo.id),this.eventInfo=null,this.$emit("set-edit-control-visibility",!0)},startMovingGridElement(e,t){this.shouldPreventGridLayoutChange(e)||this.isEditingTextBoxElement||(this.eventInfo={x:e.clientX,y:e.clientY,id:t,element:this.$refs["item-".concat(t)][0].$el,gridResizerPosition:null},this.eventInfo.element.style.setProperty("--event-background-color","var(--grey-800-02"),this.$emit("set-edit-control-visibility",!1),window.addEventListener("mousemove",this.moveGridElement),window.addEventListener("mouseup",this.stopMovingGridElement))},moveGridElement(e){this.eventInfo.element.style.setProperty("--moved-x","".concat(e.clientX-this.eventInfo.x,"px")),this.eventInfo.element.style.setProperty("--moved-y","".concat(e.clientY-this.eventInfo.y,"px")),this.eventInfo.gridResizerPosition=this.calculateGridElementPosition(e)},snapPositionToGrid(e){const t=e;let i=!1,n=!1;if(t.x1<3){const e=Math.abs(t.x1-3);t.x1+=e,t.x2+=e,i=!0}const s=Number.parseInt(this.styles["column-count"],10);if(t.x2>s+3){const e=t.x2-s-3;t.x2-=e,t.x1-=e,n=!0}if(t.x1<3){const e=Math.abs(t.x1-3);t.x1+=e,t.x2+=e,i=!0}if(i&&n&&(t.x1=3,t.x2=s+3),t.y1<1){const e=Math.abs(1-t.y1);t.y1+=e,t.y2+=e}return t},calculateGridElementPosition(e){const t=this.pxToColumns(e.clientX-this.eventInfo.x),i=this.pxToRows(e.clientY-this.eventInfo.y),n=this.gridAreaToArray(this.siteElements[this.eventInfo.id].settings.styles.position);let s={y1:n[0]+i,x1:n[1]+t,y2:n[2]+i,x2:n[3]+t};if(0!==t&&(s=this.snapPositionToGrid(s)),s.y1<1){const e=Math.abs(1-s.y1);s.y1+=e,s.y2+=e}return s},stopMovingGridElement(e){const t=this.calculateGridElementPosition(e),i="".concat(t.y1,"/").concat(t.x1,"/").concat(t.y2,"/").concat(t.x2);this.setElementData({elementId:this.eventInfo.id,data:{settings:{styles:{position:i}}},skipHistory:!1}),window.removeEventListener("mouseup",this.stopMovingGridElement),window.removeEventListener("mousemove",this.moveGridElement),this.eventInfo.element.style.setProperty("--moved-x",""),this.eventInfo.element.style.setProperty("--moved-y",""),this.eventInfo.element.style.setProperty("--event-background-color",""),this.eventInfo=null,this.$emit("set-edit-control-visibility",!0)},getMousePositionOnGrid(e){const t=this.$refs.gridContainer.getBoundingClientRect(),i=this.pxToRows(e.clientY-t.top);let n=Number.parseInt(this.styles["grid-width"],10);if(n>this.$refs.gridContainer.clientWidth){const e=Number.parseInt(this.styles["content-padding"],10);n=this.$refs.gridContainer.clientWidth-e}const s=(t.width-n)/2,o=3+this.pxToColumns(e.clientX-s);return{column:o,row:i}},onDrop(e){if(!this.validateDragDrop(e))return;this.$emit("drag-status-change",!1);const t=e.dataTransfer.getData("elementId"),i=JSON.parse(e.dataTransfer.getData("content")),n=Number.parseInt(e.dataTransfer.getData("width"),10),s=Number.parseInt(e.dataTransfer.getData("height"),10),o=JSON.parse(e.dataTransfer.getData("eventData")),{column:r,row:l}=this.isMobileMode?{column:1,row:1}:this.getMousePositionOnGrid(e),a=this.snapPositionToGrid({x1:r,x2:r+n,y1:l,y2:l+s});i.settings.styles.position="".concat(a.y1,"/").concat(a.x1,"/").concat(a.y2,"/").concat(a.x2),this.addElement({blockId:this.blockId,elementId:t,element:i}),this.onAfterElementAdd(t,o)},selectCurrentBlock(){this.hoveredElementId||this.unsetCurrentElement()},onDragEnter(e){this.validateDragDrop(e)&&(this.$emit("drag-status-change",!0),this.eventInfo||this.$emit("set-edit-control-visibility",!1),this.eventInfo={addElementActive:!0})},onDragLeave(e){this.validateDragDrop(e)&&(this.$emit("drag-status-change",!1),this.$emit("set-edit-control-visibility",!0),this.eventInfo=null)},alignmentStyles(e){var t;const i=null===(t=this.siteElements[e])||void 0===t?void 0:t.settings.styles;return{"align-self":"".concat(i["m-align-self"]),width:i["m-width"]||"100%"}},logAddElementEvent(e){const{from:t,type:i}=e;c["a"].logEvent({eventName:be["b"].builder.add_element,eventProperties:{from:t,element:Ee[i]},user:this.user})}})},we=xe,Ce=(i("8969"),Object(b["a"])(we,n,s,!1,null,"354b3e0d",null));t["default"]=Ce.exports},8969:function(e,t,i){"use strict";i("b91b")},9306:function(e,t,i){"use strict";i("65a5")},b87e8:function(e,t,i){"use strict";i("c51d")},b91b:function(e,t,i){},c51d:function(e,t,i){}}]);
//# sourceMappingURL=chunk-2345c935.0e813f40.js.map